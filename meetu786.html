<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matrimony Website</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #ff4d6d;
      color: white;
      padding: 20px;
      text-align: center;
    }
    main {
      max-width: 800px;
      margin: 30px auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      color: #333;
    }
    form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    label {
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
      color: #555;
    }
    input, select {
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      grid-column: span 2;
      padding: 10px;
      background-color: #ff4d6d;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #e03e5a;
    }
    .search-results {
      margin-top: 30px;
    }
    .profile-card {
      border: 1px solid #ddd;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
      background-color: #fafafa;
    }
  </style>
</head>
<body>
  <header>
    <h1>Matrimony Website</h1>
  </header>
  <main>
    <section>
      <h2>Register</h2>
      <form id="registerForm">
        <div>
          <label for="name">Name</label>
          <input id="name" type="text" required />
        </div>
        <div>
          <label for="email">Email</label>
          <input id="email" type="email" required />
        </div>
        <div>
          <label for="password">Password</label>
          <input id="password" type="password" required />
        </div>
        <div>
          <label for="age">Age</label>
          <input id="age" type="number" min="18" max="100" required />
        </div>
        <div>
          <label for="gender">Gender</label>
          <select id="gender" required>
            <option value="">Select</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label for="religion">Religion</label>
          <input id="religion" type="text" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" />
        </div>
        <button type="submit">Register</button>
      </form>
    </section>

    <section style="margin-top: 40px;">
      <h2>Search Matches</h2>
      <form id="searchForm">
        <div>
          <label for="ageMin">Min Age</label>
          <input id="ageMin" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="ageMax">Max Age</label>
          <input id="ageMax" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="searchReligion">Religion</label>
          <input id="searchReligion" type="text" />
        </div>
        <div>
          <label for="searchLocation">Location</label>
          <input id="searchLocation" type="text" />
        </div>
        <button type="submit">Search</button>
      </form>

      <div class="search-results" id="results"></div>
    </section>
  </main>

  <script>
    // For demo purposes only: simulate registered users in localStorage
    const usersKey = 'matrimonyUsers';

    function getUsers() {
      return JSON.parse(localStorage.getItem(usersKey)) || [];
    }

    function saveUser(user) {
      const users = getUsers();
      users.push(user);
      localStorage.setItem(usersKey, JSON.stringify(users));
    }

    document.getElementById('registerForm').addEventListener('submit', e => {
      e.preventDefault();
      const user = {
        name: e.target.name.value,
        email: e.target.email.value,
        password: e.target.password.value, // NOTE: Not secure, just demo
        age: Number(e.target.age.value),
        gender: e.target.gender.value,
        religion: e.target.religion.value,
        location: e.target.location.value,
      };
      saveUser(user);
      alert('Registered successfully!');
      e.target.reset();
    });

    document.getElementById('searchForm').addEventListener('submit', e => {
      e.preventDefault();
      const ageMin = Number(e.target.ageMin.value) || 0;
      const ageMax = Number(e.target.ageMax.value) || 150;
      const religion = e.target.searchReligion.value.toLowerCase();
      const location = e.target.searchLocation.value.toLowerCase();

      const users = getUsers();
      const results = users.filter(u => {
        return (
          u.age >= ageMin &&
          u.age <= ageMax &&
          (religion ? u.religion.toLowerCase().includes(religion) : true) &&
          (location ? u.location.toLowerCase().includes(location) : true)
        );
      });

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      if (results.length === 0) {
        resultsDiv.innerHTML = '<p>No matches found.</p>';
        return;
      }

      results.forEach(u => {
        const div = document.createElement('div');
        div.className = 'profile-card';
        div.innerHTML = `
          <strong>${u.name}</strong> (${u.gender})<br />
          Age: ${u.age}<br />
          Religion: ${u.religion || 'N/A'}<br />
          Location: ${u.location || 'N/A'}
        `;
        resultsDiv.appendChild(div);
      });
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matrimony Website with Profile Pics</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background-color: #d6336c;
      color: white;
      padding: 20px 0;
      text-align: center;
      font-weight: 700;
      font-size: 24px;
    }
    main {
      max-width: 900px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
    }
    h2 {
      margin-top: 0;
      color: #d6336c;
    }
    form {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    input, select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    input:focus, select:focus {
      border-color: #d6336c;
      outline: none;
      box-shadow: 0 0 6px #d6336caa;
    }
    button {
      grid-column: 1 / -1;
      padding: 12px 0;
      background-color: #d6336c;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #a0254c;
    }
    .search-results {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
      gap: 20px;
    }
    .profile-card {
      background: #fff0f6;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 8px rgb(214 51 108 / 0.25);
      text-align: center;
      font-size: 14px;
    }
    .profile-card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #d6336c;
      margin-bottom: 12px;
    }
    .profile-card strong {
      font-size: 18px;
      color: #b02a55;
    }
    @media (max-width: 480px) {
      main {
        padding: 20px 15px;
      }
      form {
        grid-template-columns: 1fr;
      }
      button {
        grid-column: 1 / 2;
      }
    }
  </style>
</head>
<body>
  <header>Matrimony Website</header>
  <main>
    <section>
      <h2>Register</h2>
      <form id="registerForm">
        <div>
          <label for="name">Name*</label>
          <input id="name" type="text" required />
        </div>
        <div>
          <label for="email">Email*</label>
          <input id="email" type="email" required />
        </div>
        <div>
          <label for="password">Password*</label>
          <input id="password" type="password" required />
        </div>
        <div>
          <label for="age">Age*</label>
          <input id="age" type="number" min="18" max="100" required />
        </div>
        <div>
          <label for="gender">Gender*</label>
          <select id="gender" required>
            <option value="" disabled selected>Select gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label for="religion">Religion</label>
          <input id="religion" type="text" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" />
        </div>
        <div>
          <label for="profilePic">Profile Picture</label>
          <input id="profilePic" type="file" accept="image/*" />
        </div>
        <button type="submit">Register</button>
      </form>
    </section>

    <section>
      <h2>Search Matches</h2>
      <form id="searchForm">
        <div>
          <label for="ageMin">Min Age</label>
          <input id="ageMin" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="ageMax">Max Age</label>
          <input id="ageMax" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="searchReligion">Religion</label>
          <input id="searchReligion" type="text" />
        </div>
        <div>
          <label for="searchLocation">Location</label>
          <input id="searchLocation" type="text" />
        </div>
        <button type="submit">Search</button>
      </form>

      <div class="search-results" id="results"></div>
    </section>
  </main>

  <script>
    const usersKey = 'matrimonyUsers';

    function getUsers() {
      return JSON.parse(localStorage.getItem(usersKey)) || [];
    }

    function saveUser(user) {
      const users = getUsers();
      users.push(user);
      localStorage.setItem(usersKey, JSON.stringify(users));
    }

    // Convert image file to base64
    function getBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
      });
    }

    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();

      const fileInput = e.target.profilePic.files[0];
      let imageData = '';

      if (fileInput) {
        imageData = await getBase64(fileInput);
      }

      const user = {
        name: e.target.name.value.trim(),
        email: e.target.email.value.trim(),
        password: e.target.password.value, // Just for demo, not secure
        age: Number(e.target.age.value),
        gender: e.target.gender.value,
        religion: e.target.religion.value.trim(),
        location: e.target.location.value.trim(),
        profilePic: imageData,
      };

      saveUser(user);
      alert('Registered successfully!');
      e.target.reset();
    });

    document.getElementById('searchForm').addEventListener('submit', e => {
      e.preventDefault();
      const ageMin = Number(e.target.ageMin.value) || 0;
      const ageMax = Number(e.target.ageMax.value) || 150;
      const religion = e.target.searchReligion.value.toLowerCase();
      const location = e.target.searchLocation.value.toLowerCase();

      const users = getUsers();
      const results = users.filter(u => {
        return (
          u.age >= ageMin &&
          u.age <= ageMax &&
          (religion ? u.religion.toLowerCase().includes(religion) : true) &&
          (location ? u.location.toLowerCase().includes(location) : true)
        );
      });

      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      if (results.length === 0) {
        resultsDiv.innerHTML = '<p>No matches found.</p>';
        return;
      }

      results.forEach(u => {
        const div = document.createElement('div');
        div.className = 'profile-card';
        div.innerHTML = `
          <img src="${u.profilePic || 'https://via.placeholder.com/120?text=No+Image'}" alt="Profile Picture" />
          <strong>${u.name}</strong> (${u.gender})<br />
          Age: ${u.age}<br />
          Religion: ${u.religion || 'N/A'}<br />
          Location: ${u.location || 'N/A'}
        `;
        resultsDiv.appendChild(div);
      });
    });
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matrimony Website with Login/Logout</title>
  <style>
    /* Previous styles */
    /* Add a few styles for login/logout button */
    button {
      grid-column: 1 / -1;
      padding: 12px 0;
      background-color: #d6336c;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #a0254c;
    }
    .logged-in {
      display: none;
    }
    .profile-card {
      background: #fff0f6;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 8px rgb(214 51 108 / 0.25);
      text-align: center;
      font-size: 14px;
    }
    .profile-card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #d6336c;
      margin-bottom: 12px;
    }
    .profile-card strong {
      font-size: 18px;
      color: #b02a55;
    }
  </style>
</head>
<body>
  <header>Matrimony Website</header>
  <main>
    <!-- Register and Login Section -->
    <section id="loginSection">
      <h2>Login</h2>
      <form id="loginForm">
        <div>
          <label for="loginEmail">Email</label>
          <input id="loginEmail" type="email" required />
        </div>
        <div>
          <label for="loginPassword">Password</label>
          <input id="loginPassword" type="password" required />
        </div>
        <button type="submit">Login</button>
        <p>Don't have an account? <button id="goToRegister">Register here</button></p>
      </form>
    </section>

    <section id="registerSection" class="logged-in">
      <h2>Register</h2>
      <form id="registerForm">
        <div>
          <label for="name">Name*</label>
          <input id="name" type="text" required />
        </div>
        <div>
          <label for="email">Email*</label>
          <input id="email" type="email" required />
        </div>
        <div>
          <label for="password">Password*</label>
          <input id="password" type="password" required />
        </div>
        <div>
          <label for="age">Age*</label>
          <input id="age" type="number" min="18" max="100" required />
        </div>
        <div>
          <label for="gender">Gender*</label>
          <select id="gender" required>
            <option value="" disabled selected>Select gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label for="religion">Religion</label>
          <input id="religion" type="text" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" />
        </div>
        <div>
          <label for="profilePic">Profile Picture</label>
          <input id="profilePic" type="file" accept="image/*" />
        </div>
        <button type="submit">Register</button>
      </form>
    </section>

    <!-- Search Section -->
    <section id="searchSection" class="logged-in">
      <h2>Search Matches</h2>
      <form id="searchForm">
        <div>
          <label for="ageMin">Min Age</label>
          <input id="ageMin" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="ageMax">Max Age</label>
          <input id="ageMax" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="searchReligion">Religion</label>
          <input id="searchReligion" type="text" />
        </div>
        <div>
          <label for="searchLocation">Location</label>
          <input id="searchLocation" type="text" />
        </div>
        <button type="submit">Search</button>
      </form>
      <div id="results" class="search-results"></div>
    </section>

    <!-- User Profile Section -->
    <section id="profileSection" class="logged-in">
      <h2>Your Profile</h2>
      <div id="profileDetails"></div>
      <button id="logoutButton">Logout</button>
    </section>
  </main>

  <script>
    const usersKey = 'matrimonyUsers';
    const currentUserKey = 'currentUser';

    function getUsers() {
      return JSON.parse(localStorage.getItem(usersKey)) || [];
    }

    function saveUser(user) {
      const users = getUsers();
      users.push(user);
      localStorage.setItem(usersKey, JSON.stringify(users));
    }

    function getCurrentUser() {
      return JSON.parse(localStorage.getItem(currentUserKey));
    }

    function setCurrentUser(user) {
      localStorage.setItem(currentUserKey, JSON.stringify(user));
    }

    function clearCurrentUser() {
      localStorage.removeItem(currentUserKey);
    }

    function renderProfile(user) {
      document.getElementById('profileDetails').innerHTML = `
        <img src="${user.profilePic || 'https://via.placeholder.com/120?text=No+Image'}" alt="Profile Picture" />
        <strong>${user.name}</strong><br />
        Age: ${user.age}<br />
        Religion: ${user.religion || 'N/A'}<br />
        Location: ${user.location || 'N/A'}
      `;
    }

    // Login functionality
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();

      const email = e.target.loginEmail.value.trim();
      const password = e.target.loginPassword.value.trim();

      const users = getUsers();
      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        setCurrentUser(user);
        alert('Login successful!');
        switchToProfile();
      } else {
        alert('Invalid credentials');
      }
    });

    // Switch to Register page
    document.getElementById('goToRegister').addEventListener('click', () => {
      document.getElementById('registerSection').classList.remove('logged-in');
      document.getElementById('loginSection').classList.add('logged-in');
    });

    // Register functionality
    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();

      const fileInput = e.target.profilePic.files[0];
      let imageData = '';

      if (fileInput) {
        imageData = await getBase64(fileInput);
      }

      const user = {
        name: e.target.name.value.trim(),
        email: e.target.email.value.trim(),
        password: e.target.password.value,
        age: Number(e.target.age.value),
        gender: e.target.gender.value,
        religion: e.target.religion.value.trim(),
        location: e.target.location.value.trim(),
        profilePic: imageData,
      };

      saveUser(user);
      alert('Registered successfully!');
      switchToLogin();
    });

    // Switch to Login page
    function switchToLogin() {
      document.getElementById('registerSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    }

    // Switch to Profile page
    function switchToProfile() {
      const user = getCurrentUser();
      if (user) {
        document.getElementById('profileSection').classList.remove('logged-in');
        renderProfile(user);
        document.getElementById('profileSection').classList.add('logged-in');
      }
    }

    // Logout functionality
    document.getElementById('logoutButton').addEventListener('click', () => {
      clearCurrentUser();
      alert('Logged out successfully');
      document.getElementById('profileSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    });

    // Run on load
    window.onload = function() {
      const currentUser = getCurrentUser();
      if (currentUser) {
        switchToProfile();
      } else {
        switchToLogin();
      }
    };
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matrimony Website with Messaging</title>
  <style>
    /* Add styles for the messaging section */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background-color: #d6336c;
      color: white;
      padding: 20px 0;
      text-align: center;
      font-weight: 700;
      font-size: 24px;
    }
    main {
      max-width: 900px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
    }
    h2 {
      margin-top: 0;
      color: #d6336c;
    }
    .logged-in {
      display: none;
    }
    .profile-card {
      background: #fff0f6;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 8px rgb(214 51 108 / 0.25);
      text-align: center;
      font-size: 14px;
    }
    .profile-card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #d6336c;
      margin-bottom: 12px;
    }
    .profile-card strong {
      font-size: 18px;
      color: #b02a55;
    }
    .message-list {
      max-height: 300px;
      overflow-y: auto;
      margin-top: 20px;
    }
    .message-item {
      background: #f9f9f9;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .message-item p {
      margin: 0;
    }
    .message-item .message-header {
      font-weight: bold;
      color: #d6336c;
    }
    .message-form input, .message-form button {
      padding: 10px 15px;
      margin: 10px 0;
      width: 100%;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .message-form button {
      background-color: #d6336c;
      color: white;
      border: none;
      cursor: pointer;
    }
    .message-form button:hover {
      background-color: #a0254c;
    }
  </style>
</head>
<body>
  <header>Matrimony Website</header>
  <main>
    <!-- Register and Login Section -->
    <section id="loginSection">
      <h2>Login</h2>
      <form id="loginForm">
        <div>
          <label for="loginEmail">Email</label>
          <input id="loginEmail" type="email" required />
        </div>
        <div>
          <label for="loginPassword">Password</label>
          <input id="loginPassword" type="password" required />
        </div>
        <button type="submit">Login</button>
        <p>Don't have an account? <button id="goToRegister">Register here</button></p>
      </form>
    </section>

    <section id="registerSection" class="logged-in">
      <h2>Register</h2>
      <form id="registerForm">
        <div>
          <label for="name">Name*</label>
          <input id="name" type="text" required />
        </div>
        <div>
          <label for="email">Email*</label>
          <input id="email" type="email" required />
        </div>
        <div>
          <label for="password">Password*</label>
          <input id="password" type="password" required />
        </div>
        <div>
          <label for="age">Age*</label>
          <input id="age" type="number" min="18" max="100" required />
        </div>
        <div>
          <label for="gender">Gender*</label>
          <select id="gender" required>
            <option value="" disabled selected>Select gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label for="religion">Religion</label>
          <input id="religion" type="text" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" />
        </div>
        <div>
          <label for="profilePic">Profile Picture</label>
          <input id="profilePic" type="file" accept="image/*" />
        </div>
        <button type="submit">Register</button>
      </form>
    </section>

    <!-- Search Section -->
    <section id="searchSection" class="logged-in">
      <h2>Search Matches</h2>
      <form id="searchForm">
        <div>
          <label for="ageMin">Min Age</label>
          <input id="ageMin" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="ageMax">Max Age</label>
          <input id="ageMax" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="searchReligion">Religion</label>
          <input id="searchReligion" type="text" />
        </div>
        <div>
          <label for="searchLocation">Location</label>
          <input id="searchLocation" type="text" />
        </div>
        <button type="submit">Search</button>
      </form>
      <div id="results" class="search-results"></div>
    </section>

    <!-- User Profile Section -->
    <section id="profileSection" class="logged-in">
      <h2>Your Profile</h2>
      <div id="profileDetails"></div>
      <button id="logoutButton">Logout</button>
    </section>

    <!-- Messaging Section -->
    <section id="messagesSection" class="logged-in">
      <h2>Messages</h2>
      <div class="message-list" id="messageList"></div>
      <div class="message-form">
        <textarea id="messageContent" placeholder="Write a message..." rows="4"></textarea>
        <button id="sendMessageButton">Send Message</button>
      </div>
    </section>
  </main>

  <script>
    const usersKey = 'matrimonyUsers';
    const currentUserKey = 'currentUser';

    function getUsers() {
      return JSON.parse(localStorage.getItem(usersKey)) || [];
    }

    function saveUser(user) {
      const users = getUsers();
      users.push(user);
      localStorage.setItem(usersKey, JSON.stringify(users));
    }

    function getCurrentUser() {
      return JSON.parse(localStorage.getItem(currentUserKey));
    }

    function setCurrentUser(user) {
      localStorage.setItem(currentUserKey, JSON.stringify(user));
    }

    function clearCurrentUser() {
      localStorage.removeItem(currentUserKey);
    }

    function renderProfile(user) {
      document.getElementById('profileDetails').innerHTML = `
        <img src="${user.profilePic || 'https://via.placeholder.com/120?text=No+Image'}" alt="Profile Picture" />
        <strong>${user.name}</strong><br />
        Age: ${user.age}<br />
        Religion: ${user.religion || 'N/A'}<br />
        Location: ${user.location || 'N/A'}
      `;
    }

    function renderMessages(messages) {
      const messageList = document.getElementById('messageList');
      messageList.innerHTML = '';
      messages.forEach(message => {
        const messageItem = document.createElement('div');
        messageItem.classList.add('message-item');
        messageItem.innerHTML = `
          <div class="message-header">${message.from}</div>
          <p>${message.content}</p>
        `;
        messageList.appendChild(messageItem);
      });
    }

    function getMessages() {
      const currentUser = getCurrentUser();
      return currentUser ? currentUser.messages || [] : [];
    }

    function saveMessage(message) {
      const currentUser = getCurrentUser();
      if (currentUser) {
        currentUser.messages = currentUser.messages || [];
        currentUser.messages.push(message);
        setCurrentUser(currentUser);
      }
    }

    // Login functionality
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();

      const email = e.target.loginEmail.value.trim();
      const password = e.target.loginPassword.value.trim();

      const users = getUsers();
      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        setCurrentUser(user);
        alert('Login successful!');
        switchToProfile();
      } else {
        alert('Invalid credentials');
      }
    });

    // Switch to Register page
    document.getElementById('goToRegister').addEventListener('click', () => {
      document.getElementById('registerSection').classList.remove('logged-in');
      document.getElementById('loginSection').classList.add('logged-in');
    });

    // Register functionality
    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();

      const fileInput = e.target.profilePic.files[0];
      let imageData = '';

      if (fileInput) {
        imageData = await getBase64(fileInput);
      }

      const user = {
        name: e.target.name.value.trim(),
        email: e.target.email.value.trim(),
        password: e.target.password.value,
        age: Number(e.target.age.value),
        gender: e.target.gender.value,
        religion: e.target.religion.value.trim(),
        location: e.target.location.value.trim(),
        profilePic: imageData,
        messages: [],
      };

      saveUser(user);
      alert('Registered successfully!');
      switchToLogin();
    });

    // Switch to Login page
    function switchToLogin() {
      document.getElementById('registerSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    }

    // Switch to Profile page
    function switchToProfile() {
      const user = getCurrentUser();
      if (user) {
        document.getElementById('profileSection').classList.remove('logged-in');
        renderProfile(user);
        document.getElementById('profileSection').classList.add('logged-in');
        document.getElementById('messagesSection').classList.remove('logged-in');
      }
    }

    // Send message functionality
    document.getElementById('sendMessageButton').addEventListener('click', () => {
      const messageContent = document.getElementById('messageContent').value.trim();
      if (messageContent) {
        const message = {
          from: getCurrentUser().name,
          content: messageContent,
        };
        saveMessage(message);
        renderMessages(getMessages());
        document.getElementById('messageContent').value = ''; // Clear the message input
      } else {
        alert('Please write a message.');
      }
    });

    // Logout functionality
    document.getElementById('logoutButton').addEventListener('click', () => {
      clearCurrentUser();
      alert('Logged out successfully');
      document.getElementById('profileSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    });

    // Run on load
    window.onload = function() {
      const currentUser = getCurrentUser();
      if (currentUser) {
        switchToProfile();
        renderMessages(getMessages());
      } else {
        switchToLogin();
      }
    };
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matrimony Website with Messaging</title>
  <style>
    /* Add styles for the messaging section */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f2f5;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background-color: #d6336c;
      color: white;
      padding: 20px 0;
      text-align: center;
      font-weight: 700;
      font-size: 24px;
    }
    main {
      max-width: 900px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.1);
    }
    h2 {
      margin-top: 0;
      color: #d6336c;
    }
    .logged-in {
      display: none;
    }
    .profile-card {
      background: #fff0f6;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 8px rgb(214 51 108 / 0.25);
      text-align: center;
      font-size: 14px;
    }
    .profile-card img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #d6336c;
      margin-bottom: 12px;
    }
    .profile-card strong {
      font-size: 18px;
      color: #b02a55;
    }
    .message-list {
      max-height: 300px;
      overflow-y: auto;
      margin-top: 20px;
    }
    .message-item {
      background: #f9f9f9;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .message-item p {
      margin: 0;
    }
    .message-item .message-header {
      font-weight: bold;
      color: #d6336c;
    }
    .message-form input, .message-form button {
      padding: 10px 15px;
      margin: 10px 0;
      width: 100%;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    .message-form button {
      background-color: #d6336c;
      color: white;
      border: none;
      cursor: pointer;
    }
    .message-form button:hover {
      background-color: #a0254c;
    }
  </style>
</head>
<body>
  <header>Matrimony Website</header>
  <main>
    <!-- Register and Login Section -->
    <section id="loginSection">
      <h2>Login</h2>
      <form id="loginForm">
        <div>
          <label for="loginEmail">Email</label>
          <input id="loginEmail" type="email" required />
        </div>
        <div>
          <label for="loginPassword">Password</label>
          <input id="loginPassword" type="password" required />
        </div>
        <button type="submit">Login</button>
        <p>Don't have an account? <button id="goToRegister">Register here</button></p>
      </form>
    </section>

    <section id="registerSection" class="logged-in">
      <h2>Register</h2>
      <form id="registerForm">
        <div>
          <label for="name">Name*</label>
          <input id="name" type="text" required />
        </div>
        <div>
          <label for="email">Email*</label>
          <input id="email" type="email" required />
        </div>
        <div>
          <label for="password">Password*</label>
          <input id="password" type="password" required />
        </div>
        <div>
          <label for="age">Age*</label>
          <input id="age" type="number" min="18" max="100" required />
        </div>
        <div>
          <label for="gender">Gender*</label>
          <select id="gender" required>
            <option value="" disabled selected>Select gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div>
          <label for="religion">Religion</label>
          <input id="religion" type="text" />
        </div>
        <div>
          <label for="location">Location</label>
          <input id="location" type="text" />
        </div>
        <div>
          <label for="profilePic">Profile Picture</label>
          <input id="profilePic" type="file" accept="image/*" />
        </div>
        <button type="submit">Register</button>
      </form>
    </section>

    <!-- Search Section -->
    <section id="searchSection" class="logged-in">
      <h2>Search Matches</h2>
      <form id="searchForm">
        <div>
          <label for="ageMin">Min Age</label>
          <input id="ageMin" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="ageMax">Max Age</label>
          <input id="ageMax" type="number" min="18" max="100" />
        </div>
        <div>
          <label for="searchReligion">Religion</label>
          <input id="searchReligion" type="text" />
        </div>
        <div>
          <label for="searchLocation">Location</label>
          <input id="searchLocation" type="text" />
        </div>
        <button type="submit">Search</button>
      </form>
      <div id="results" class="search-results"></div>
    </section>

    <!-- User Profile Section -->
    <section id="profileSection" class="logged-in">
      <h2>Your Profile</h2>
      <div id="profileDetails"></div>
      <button id="logoutButton">Logout</button>
    </section>

    <!-- Messaging Section -->
    <section id="messagesSection" class="logged-in">
      <h2>Messages</h2>
      <div class="message-list" id="messageList"></div>
      <div class="message-form">
        <textarea id="messageContent" placeholder="Write a message..." rows="4"></textarea>
        <button id="sendMessageButton">Send Message</button>
      </div>
    </section>
  </main>

  <script>
    // Initialize sample users in localStorage if not already present
    function initializeSampleUsers() {
      if (!localStorage.getItem('matrimonyUsers')) {
        const sampleUsers = [
          {
            name: "Alice Johnson",
            email: "alice@example.com",
            password: "alice123",
            age: 28,
            gender: "Female",
            religion: "Christianity",
            location: "New York",
            profilePic: "",
            messages: []
          },
          {
            name: "Bob Smith",
            email: "bob@example.com",
            password: "bob123",
            age: 32,
            gender: "Male",
            religion: "Christianity",
            location: "New York",
            profilePic: "",
            messages: []
          },
          {
            name: "Chitra Rao",
            email: "chitra@example.com",
            password: "chitra123",
            age: 26,
            gender: "Female",
            religion: "Hinduism",
            location: "Mumbai",
            profilePic: "",
            messages: []
          },
          {
            name: "Dinesh Kumar",
            email: "dinesh@example.com",
            password: "dinesh123",
            age: 30,
            gender: "Male",
            religion: "Hinduism",
            location: "Mumbai",
            profilePic: "",
            messages: []
          }
        ];
        localStorage.setItem('matrimonyUsers', JSON.stringify(sampleUsers));
        console.log('Sample users initialized.');
      }
    }

    // Initialize sample users on page load
    initializeSampleUsers();

    const usersKey = 'matrimonyUsers';
    const currentUserKey = 'currentUser';

    function getUsers() {
      return JSON.parse(localStorage.getItem(usersKey)) || [];
    }

    function saveUser(user) {
      const users = getUsers();
      users.push(user);
      localStorage.setItem(usersKey, JSON.stringify(users));
    }

    function getCurrentUser() {
      return JSON.parse(localStorage.getItem(currentUserKey));
    }

    function setCurrentUser(user) {
      localStorage.setItem(currentUserKey, JSON.stringify(user));
    }

    function clearCurrentUser() {
      localStorage.removeItem(currentUserKey);
    }

    function renderProfile(user) {
      document.getElementById('profileDetails').innerHTML = `
        <img src="${user.profilePic || 'https://via.placeholder.com/120?text=No+Image'}" alt="Profile Picture" />
        <strong>${user.name}</strong><br />
        Age: ${user.age}<br />
        Religion: ${user.religion || 'N/A'}<br />
        Location: ${user.location || 'N/A'}
      `;
    }

    function renderMessages(messages) {
      const messageList = document.getElementById('messageList');
      messageList.innerHTML = '';
      messages.forEach(message => {
        const messageItem = document.createElement('div');
        messageItem.classList.add('message-item');
        messageItem.innerHTML = `
          <div class="message-header">${message.from}</div>
          <p>${message.content}</p>
        `;
        messageList.appendChild(messageItem);
      });
    }

    function getMessages() {
      const currentUser = getCurrentUser();
      return currentUser ? currentUser.messages || [] : [];
    }

    function saveMessage(message) {
      const currentUser = getCurrentUser();
      if (currentUser) {
        currentUser.messages = currentUser.messages || [];
        currentUser.messages.push(message);
        setCurrentUser(currentUser);
      }
    }

    // Login functionality
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();

      const email = e.target.loginEmail.value.trim();
      const password = e.target.loginPassword.value.trim();

      const users = getUsers();
      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        setCurrentUser(user);
        alert('Login successful!');
        switchToProfile();
      } else {
        alert('Invalid credentials');
      }
    });

    // Switch to Register page
    document.getElementById('goToRegister').addEventListener('click', () => {
      document.getElementById('registerSection').classList.remove('logged-in');
      document.getElementById('loginSection').classList.add('logged-in');
    });

    // Register functionality
    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();

      const fileInput = e.target.profilePic.files[0];
      let imageData = '';

      if (fileInput) {
        imageData = await getBase64(fileInput);
      }

      const user = {
        name: e.target.name.value.trim(),
        email: e.target.email.value.trim(),
        password: e.target.password.value,
        age: Number(e.target.age.value),
        gender: e.target.gender.value,
        religion: e.target.religion.value.trim(),
        location: e.target.location.value.trim(),
        profilePic: imageData,
        messages: [],
      };

      saveUser(user);
      alert('Registered successfully!');
      switchToLogin();
    });

    // Switch to Login page
    function switchToLogin() {
      document.getElementById('registerSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    }

    // Switch to Profile page
    function switchToProfile() {
      const user = getCurrentUser();
      if (user) {
        document.getElementById('profileSection').classList.remove('logged-in');
        renderProfile(user);
        document.getElementById('profileSection').classList.add('logged-in');
        document.getElementById('messagesSection').classList.remove('logged-in');
      }
    }

    // Send message functionality
    document.getElementById('sendMessageButton').addEventListener('click', () => {
      const messageContent = document.getElementById('messageContent').value.trim();
      if (messageContent) {
        const message = {
          from: getCurrentUser().name,
          content: messageContent,
        };
        saveMessage(message);
        renderMessages(getMessages());
        document.getElementById('messageContent').value = ''; // Clear the message input
      } else {
        alert('Please write a message.');
      }
    });

    // Logout functionality
    document.getElementById('logoutButton').addEventListener('click', () => {
      clearCurrentUser();
      alert('Logged out successfully');
      document.getElementById('profileSection').classList.add('logged-in');
      document.getElementById('loginSection').classList.remove('logged-in');
    });

    // Run on load
    window.onload = function() {
      const currentUser = getCurrentUser();
      if (currentUser) {
        switchToProfile();
        renderMessages(getMessages());
      } else {
        switchToLogin();
      }
    };
  </script>
</body>
</html>
<!-- Add these inside your existing registration form -->
<div>
  <label for="education">Education</label>
  <input id="education" type="text" />
</div>
<div>
  <label for="occupation">Occupation</label>
  <input id="occupation" type="text" />
</div>
<div>
  <label for="hobbies">Hobbies</label>
  <input id="hobbies" type="text" placeholder="Comma separated" />
</div>
